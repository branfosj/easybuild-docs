
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.easybuild.io/unit-tests/">
      
      <link rel="icon" href="../favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Unit tests {: #unit_tests } - EasyBuild - building software with ease</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-BLVCH6991S"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-BLVCH6991S",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-BLVCH6991S",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="easybuild" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unit_tests" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="EasyBuild - building software with ease" class="md-header__button md-logo" aria-label="EasyBuild - building software with ease" data-md-component="logo">
      
  <img src="../img/easybuild_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EasyBuild - building software with ease
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Unit tests {: #unit_tests }
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/easybuilders/easybuild-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EasyBuild @ GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="EasyBuild - building software with ease" class="md-nav__button md-logo" aria-label="EasyBuild - building software with ease" data-md-component="logo">
      
  <img src="../img/easybuild_logo.png" alt="logo">

    </a>
    EasyBuild - building software with ease
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/easybuilders/easybuild-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    EasyBuild @ GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../what-is-easybuild/" class="md-nav__link">
        What is EasyBuild?
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../terminology/" class="md-nav__link">
        Terminology
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../using-easybuild/" class="md-nav__link">
        Using EasyBuild
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        Release notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        API
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-help/" class="md-nav__link">
        Getting help
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/easybuilders/easybuild-docs/easybuild-docs/edit/main/docs/unit-tests.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="unit_tests">Unit tests<a class="headerlink" href="#unit_tests" title="Permanent link">&para;</a></h1>
<p>Since EasyBuild v1.0, an extensive suite of unit tests has been implemented. The unit tests have become an indispensable
factor in keeping EasyBuild stable and backward-compatible during development.</p>
<p>We refer to the available tests as unit tests, even though they may not be <em>unit</em> tests in the strict sense of the word.
Some tests are actually end-to-end tests or integration tests, see also
<a href="https://en.wikipedia.org/wiki/Software_testing#Testing_levels">https://en.wikipedia.org/wiki/Software_testing#Testing_levels</a>.</p>
<p>Following the test-driven development paradigm, additional unit tests are implemented when new features are added or
when bugs are uncovered (and fixed).</p>
<h2 id="unit_tests_what">What the unit tests are <em>not</em><a class="headerlink" href="#unit_tests_what" title="Permanent link">&para;</a></h2>
<p>Each of the EasyBuild unit tests aim to test a specific characteristic of EasyBuild, e.g., a configuration option, a
particular function or method in the EasyBuild framework, some specific feature, how EasyBuild handles a particular
type of input, etc.</p>
<p>The unit tests do <em>not</em> test the build and installation process of particular supported software packages (other than
a handful of toy ones included in the tests themselves), let alone test the software installations obtained using
EasyBuild themselves.</p>
<p>Each stable EasyBuild release is subjected to a (time- and resource-consuming) <em>regression test</em>, however,
which is out of scope here.</p>
<h2 id="unit_tests_suites">Available unit test suites<a class="headerlink" href="#unit_tests_suites" title="Permanent link">&para;</a></h2>
<p>Three different unit test suites are available for EasyBuild, each of which tied to one of the EasyBuild code
repositories on GitHub: <em>EasyBuild framework</em>, <em>easyblocks</em>, <em>easyconfigs</em>.</p>
<h3 id="unit_tests_framework">EasyBuild framework unit tests<a class="headerlink" href="#unit_tests_framework" title="Permanent link">&para;</a></h3>
<p>The unit test suite for the EasyBuild framework is by far the most extensive one, in terms of code size, coverage and
the amount of effort that is put into it.</p>
<p>These tests probe the functionality provided by the EasyBuild framework, ranging from standard operation (building and
installing software, and generating module files) to specific configuration options, selected functional aspects,
optional features and edge cases.</p>
<p>At the time of writing (EasyBuild v2.0), more than 250 tests were implemented, organised in 28 subgroups.</p>
<p>Running the full EasyBuild framework unit test suite takes about 15-40 minutes, depending on your system resources and
testing configuration.</p>
<h3 id="unit_tests_easyblocks">easyblocks unit tests<a class="headerlink" href="#unit_tests_easyblocks" title="Permanent link">&para;</a></h3>
<p>The easyblocks unit test suite consists of a coupe of light-weight tests that are run per easyblock:</p>
<ul>
<li>initialising the easyblock, to check for Python syntax errors and faulty imports</li>
<li>checking for the use of deprecated (or no longer supported) functionality</li>
</ul>
<p>Running the full easyblocks unit test suite takes less than one minute.</p>
<h3 id="unit_tests_easyconfigs">easyconfigs unit tests<a class="headerlink" href="#unit_tests_easyconfigs" title="Permanent link">&para;</a></h3>
<p>The easyconfigs unit test suite consists a couple of tests for each of the available easyconfig files, followed by two
large-scale overall tests.</p>
<p>For each of the available easyconfig files, the following aspects are tested:</p>
<ul>
<li>parsing the easyconfig file, to make sure no syntax errors are present</li>
<li>verifying that the filename matches the contents of the easyconfig file (software name/version, version suffix and
  toolchain name/version)</li>
<li>creating an <code>EasyBlock</code> instance using the parsed easyconfig, to check whether mandatory easyconfig parameters
  are defined</li>
<li>ensuring that all required patch files are available (right next to the easyconfig file)</li>
<li>making sure that the specified sanity check paths adhere to the requirements, i.e. only (and both) the <code>files</code>/<code>dirs</code>
  keys are listed, with the value for either one being non-empty</li>
<li>checking for the use of deprecated (or no longer supported) functionality</li>
<li>verifying whether <code>eb --check-style</code> on the easyconfig file passes</li>
<li>ensuring SHA256 checksums are included in new or changed easyconfig files</li>
</ul>
<p>If these tests pass for each and every available easyconfig file, two additional overall tests are run, i.e.:</p>
<ul>
<li>ensuring that an easyconfig file is available for each specified dependency</li>
<li>checking whether any version conflicts occur in the dependency graph for each easyconfig file</li>
</ul>
<p>Running the full easyconfigs unit test suite should only take a couple of minutes.</p>
<h2 id="unit_tests_applications">Applications<a class="headerlink" href="#unit_tests_applications" title="Permanent link">&para;</a></h2>
<p>The unit test suites are automatically triggered for:</p>
<ul>
<li>each pull request (update)</li>
<li>each (set of) change(s) that is merged in (usually via a pull request)</li>
</ul>
<p>The status of the different unit test suites is tracked separately for the <code>main</code> and <code>develop</code> branches
of the EasyBuild code repositories:</p>
<ul>
<li><code>main</code> (stable, latest EasyBuild release)</li>
<li><code>develop</code> (development, potentially unstable)</li>
</ul>
<p>We strictly adhere to the policy of only merging pull requests for which the corresponding (latest) run of the <em>full</em> unit
test suite passes successfully.</p>
<h2 id="unit_tests_usage">Usage<a class="headerlink" href="#unit_tests_usage" title="Permanent link">&para;</a></h2>
<p>Using the unit tests is deliberately kept very simple.</p>
<h3 id="unit_tests_config">Configuration<a class="headerlink" href="#unit_tests_config" title="Permanent link">&para;</a></h3>
<p>Since EasyBuild v2.0, the unit test suites are fully isolated from any (system- or user-level)
EasyBuild configuration which is in place in the environment where the tests are being run.</p>
<p>The easyblocks and easyconfigs unit test suite are oblivious to any defined configuration options.</p>
<p>For the EasyBuild framework unit tests, all configuration files and <code>EASYBUILD_</code>-prefixed environment variables
are ignored.</p>
<p>To enable running the EasyBuild framework unit test suite under a specific configuration that differs from
the default, environment variables can be defined for each of the configuration options supported by EasyBuild.</p>
<p>Before starting a set of EasyBuild framework tests, all defined environment variables for which the name is prefixed by
<code>TEST_EASYBUILD_</code> will be injected into the test environment as environment variables prefixed with <code>EASYBUILD_</code>
instead. Thus, to set a particular configuration option <code>--foo</code>, you should define the environment variable
<code>$TEST_EASYBUILD_FOO</code>.</p>
<h4 id="unit_tests_modules_tool">Modules tool to use for running tests<a class="headerlink" href="#unit_tests_modules_tool" title="Permanent link">&para;</a></h4>
<p>One particular configuration option worth mentioning explicitly is the modules tool that is to be used by the EasyBuild
framework, which is by default the traditional Tcl/C environment modules, referred to as <code>EnvironmentModulesC</code> in
EasyBuild configuration terms (see <code>eb --help</code> and <code>eb --avail-modules-tools</code>).</p>
<p>To run the EasyBuild framework unit tests with a particular modules tool, simply define the
<code>$TEST_EASYBUILD_MODULES_TOOL</code> environment variable with the corresponding value. For example::</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">TEST_EASYBUILD_MODULES_TOOL</span><span class="o">=</span>Lmod
</code></pre></div>
<p>Just like for EasyBuild itself, the EasyBuild framework unit test suite expects that the modules tool binary/script
(<code>modulecmd</code>, <code>modulecmd.tcl</code> or <code>lmod</code>) is available via <code>$PATH</code>, see <a class="autorefs autorefs-internal" href="../installation/#required_modules_tool">Required modules tool</a>.</p>
<h4 id="unit_tests_github_token">Installing a GitHub token for the unit tests<a class="headerlink" href="#unit_tests_github_token" title="Permanent link">&para;</a></h4>
<p>Some of the EasyBuild framework unit tests require that a GitHub token is in place for the <code>easybuild_test</code> user,
in a non-encrypted keyring (so it can be obtained without having to provide a password).</p>
<p>This can be done as follows (copy-paste the GitHub token at the <code>Password:</code> prompt)::</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python
<span class="go">&gt;&gt;&gt; import getpass, keyring</span>
<span class="go">&gt;&gt;&gt; keyring.set_keyring(keyring.backends.file.PlaintextKeyring())</span>
<span class="go">&gt;&gt;&gt; keyring.set_password(&#39;github_token&#39;, &#39;easybuild_test&#39;, getpass.getpass())</span>
<span class="go">Password:</span>
<span class="go">&gt;&gt;&gt; exit()</span>
</code></pre></div>
<p>More details about obtaining and installing a GitHub token in your keyring are available at
<a href="https://github.com/easybuilders/easybuild/wiki/Review-process-for-contributions#setting-things-up">https://github.com/easybuilders/easybuild/wiki/Review-process-for-contributions#setting-things-up</a>.</p>
<h4 id="unit_tests_running">Running<a class="headerlink" href="#unit_tests_running" title="Permanent link">&para;</a></h4>
<p>To run a full unit test suite, simply run the respective <code>suite</code> Python module.</p>
<ul>
<li>EasyBuild framework: <code>python -m test.framework.suite</code></li>
<li>easyblocks: <code>python -m test.easyblocks.suite</code></li>
<li>easyconfigs: <code>python -m test.easyconfigs.suite</code></li>
</ul>
<p>For the EasyBuild framework unit tests, each of the test subgroups can be run separately via a dedicated Python module
other than <code>suite</code>, to focus on testing a particular aspect. See
<a href="https://github.com/easybuilders/easybuild-framework/tree/main/test/framework">https://github.com/easybuilders/easybuild-framework/tree/main/test/framework</a> for an overview of the available Python
modules corresponding to subgroups of tests (note: <code>__init__.py</code> and <code>utilities.py</code> are <em>not</em> such modules).</p>
<p>For example, to run the full EasyBuild framework unit test suite using Lmod as a modules tool::</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">TEST_EASYBUILD_MODULES_TOOL</span><span class="o">=</span>Lmod
python -m test.framework.suite
</code></pre></div>
<p>To only run the subgroup of tests for <code>filetools</code>::</p>
<div class="highlight"><pre><span></span><code>python -m test.framework.filetools
</code></pre></div>
<p>Since EasyBuild v2.8.2, tests can be <em>filtered</em> by name. Simply add the string to filter with to the test command.</p>
<p>For example, to run only the tests containing the word <code>load</code> in the subgroup <code>modules</code>, run::</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python -m test.framework.modules load

<span class="go">Filtered ModulesTest tests using &#39;load&#39;, retained 2/19 tests: test_load, test_load_in_hierarchy</span>
<span class="go">..</span>
<span class="go">----------------------------------------------------------------------</span>
<span class="go">Ran 2 tests in 2.688s</span>

<span class="go">OK</span>
</code></pre></div>
<p>This works with as many filter words as you want to use. For example, to run every test method in <code>modules</code>
containing the words <code>load</code> or <code>bash</code>:</p>
<div class="highlight"><pre><span></span><code>python -m test.framework.modules load bash
</code></pre></div>
<h3 id="unit_tests_results">Results<a class="headerlink" href="#unit_tests_results" title="Permanent link">&para;</a></h3>
<p>The test results will be printed as the unit test suite progresses, potentially producing a lot of information for
failing tests to help determine the cause of the failure. It may thus be useful to capture the output for later inspection,
for example::</p>
<div class="highlight"><pre><span></span><code>python -m test.framework.suite <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">|</span> tee eb_test.log
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some tests will be skipped deliberately, because of missing optional dependencies or other provisions, for example
a GitHub token. The output of the unit tests will clearly indicate which tests were skipped.</p>
</div>
<h4 id="unit_tests_examples">Examples<a class="headerlink" href="#unit_tests_examples" title="Permanent link">&para;</a></h4>
<p>A successful run of the EasyBuild framework test suite, without skipped tests::</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python -m test.framework.suite
<span class="go">Running tests...</span>
<span class="go">----------------------------------------------------------------------</span>
<span class="go">..........................................................................................................................................................................................................................................................</span>
<span class="go">----------------------------------------------------------------------</span>
<span class="go">Ran 250 tests in 1404.897s</span>

<span class="go">OK</span>
</code></pre></div>
<p>A run with a couple of deliberately skipped tests and a single failed test (denoted by <code>F</code>), along with the
corresponding traceback::</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>python -m test.framework.suite
<span class="go">Running tests...</span>
<span class="go">----------------------------------------------------------------------</span>
<span class="go">................Skipping test_from_pr, no GitHub token available?</span>
<span class="go">.Skipping test_from_pr, no GitHub token available?</span>
<span class="go">......F..............(skipping GitRepository test)</span>
<span class="go">..(skipping SvnRepository test)</span>
<span class="go">..................................................................................................................Skipping test_fetch_easyconfigs_from_pr, no GitHub token available?</span>
<span class="go">.Skipping test_read, no GitHub token available?</span>
<span class="go">.Skipping test_read_api, no GitHub token available?</span>
<span class="go">.Skipping test_walk, no GitHub token available?</span>
<span class="go">.............................................................................................</span>
<span class="go">======================================================================</span>
<span class="go">FAIL: Test listing easyblock hierarchy.</span>
<span class="go">----------------------------------------------------------------------</span>
<span class="go">Traceback (most recent call last):</span>
<span class="go">  File &quot;/tmp/example/easybuild-framework/test/framework/options.py&quot;, line 544, in test_list_easyblocks</span>
<span class="go">    self.assertTrue(re.search(pat, outtxt), &quot;Pattern &#39;%s&#39; is found in output of --list-easyblocks: %s&quot; % (pat, outtxt))</span>
<span class="go">AssertionError: Pattern &#39;EasyBlock\n&#39; is found in output of --list-easyblocks:</span>

<span class="go">----------------------------------------------------------------------</span>
<span class="go">Ran 250 tests in 2641.200s</span>

<span class="go">FAILED (failures=1)</span>
<span class="go">ERROR: Not all tests were successful.</span>
<span class="go">Log available at /tmp/example/easybuild-dy2ZTx/easybuild-tests-l0doQ2.log</span>
</code></pre></div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 8, 2022</span>
      
    
  </small>
</div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://twitter.com/easy_build" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.youtube.com/c/easybuilders" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://docs.easybuild.io" target="_blank" rel="noopener" title="docs.easybuild.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["instant", "navigation.top", "toc.integrate"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>